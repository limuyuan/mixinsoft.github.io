function search(a){var b=a||document.querySelector("#searchItem").value,cellList=document.querySelectorAll(".content .table > .table-row-group > .table-row > .table-cell");resetLightFont();removeChildNodesHide(document.querySelector(".content"));if(b&&b.trim()){displayCell(b,cellList)}}function displayCell(a,b){for(var i=0;i<b.length;i++){var c=b[i],innerHTML=c.innerHTML;if(innerHTML.indexOf(a)>-1){if(c.classList.contains("clue-cell")){var d=c.parentNode.querySelectorAll(".table-cell")[1].innerHTML;if(d&&d.trim()){search(d);return}}else{c.classList.remove("hide");var e="<span class='light'>"+a+"</span>";c.innerHTML=innerHTML.replace(a,e)}}else{c.classList.add("hide")}}displayChapter()}function displayChapter(){var a=document.querySelectorAll(".content .table");for(var t=0;t<a.length;t++){var b=a[t],groupList=b.querySelectorAll(".table-row-group");for(var g=0;g<groupList.length;g++){var c=groupList[g],rowList=c.querySelectorAll(".table-row");for(var r=0;r<rowList.length;r++){var d=rowList[r];if(d.querySelectorAll(".table-cell:not(.hide)").length===0){d.classList.add("hide")}else{d.classList.remove("hide");removeChildNodesHide(d)}}if(c.querySelectorAll(".table-row:not(.hide)").length===0){c.classList.add("hide")}else{c.classList.remove("hide");var e=c.querySelector(".table-row.chapter-header");if(e.classList.contains("hide")){e.classList.remove("hide");removeChildNodesHide(e)}else{for(var f=0;f<rowList.length;f++){var d=rowList[f];d.classList.remove("hide");removeChildNodesHide(d)}}}}if(b.querySelectorAll(".table-row-group:not(.hide)").length===0){b.classList.add("hide")}else{b.classList.remove("hide")}}}function removeChildNodesHide(a){var b=a.querySelectorAll(".hide");for(var n=0;n<b.length;n++){b[n].classList.remove("hide")}}function resetLightFont(){var a=document.querySelectorAll("span.light");for(var l=0;l<a.length;l++){var b=a[l];b.outerHTML=b.innerHTML}}